---
title: "Référence API - v2.0"
description: "Documentation API complète pour v2.0 avec support GraphQL"
---

import { Accordion, Callout, Card, CardGroup } from "mintlify/components";

# API Salsa as a Service v2.0

L'API v2.0 ajoute le support GraphQL, des webhooks améliorés et de nouveaux endpoints de prévision IA.

<Callout type="info">
Nouveau dans v2.0 : endpoint GraphQL disponible sur `https://api.salsaasaservice.com/graphql`.
</Callout>

---

## Navigation rapide

<CardGroup>
  <Card title="Authentification" href="#authentification">
    Clés API, en-têtes et exemple.
  </Card>
  <Card title="GraphQL" href="#api-graphql">
    Endpoint, requêtes et abonnements.
  </Card>
  <Card title="Prévisions IA" href="#previsions-ia">
    Forecast et entraînement du modèle.
  </Card>
  <Card title="Webhooks" href="#webhooks">
    Événements et configuration.
  </Card>
</CardGroup>

---

## URL de base

```
https://api.salsaasaservice.com/v2
```

---

## Authentification {#authentification}

Toutes les requêtes API nécessitent une authentification avec votre clé API.

### En-tête d'authentification

```http
Authorization: Bearer VOTRE_CLE_API
```

<Callout type="warning">
Les clés API v1.0 ne fonctionnent pas avec v2.0. Générez une nouvelle clé depuis Paramètres → Développeur → API v2.0.
</Callout>

---

## Limites de taux

- Plan Starter : 10 000 requêtes / heure  
- Plan Professionnel : 100 000 requêtes / heure  
- Plan Entreprise : Illimité  

---

## API GraphQL {#api-graphql}

### Endpoint

```
https://api.salsaasaservice.com/graphql
```

### Exemple de requête

```graphql
query GetProductionForecast {
  forecast(location: "loc_123", days: 7) {
    date
    recipes {
      id
      name
      predictedDemand {
        quantity
        unit
        confidence
      }
    }
  }
}
```

### Abonnement en temps réel

```graphql
subscription OnQualityAlert {
  qualityAlert(location: "loc_123") {
    id
    severity
    sensorId
    message
    timestamp
  }
}
```

---

## Prévisions IA {#previsions-ia}

### Obtenir les prévisions

```http
GET /v2/ai/forecast?location=loc_123&days=7
```

```json
{
  "forecast_period": {
    "start_date": "2024-01-20",
    "end_date": "2024-01-27",
    "days": 7
  },
  "predictions": [
    {
      "date": "2024-01-20",
      "recipe_id": "rec_456",
      "recipe_name": "Salsa maison",
      "predicted_demand": {
        "quantity": 12.5,
        "unit": "gallons",
        "confidence_interval": [11.2, 13.8],
        "confidence_level": 0.95
      }
    }
  ]
}
```

### Entraîner le modèle

```http
POST /v2/ai/forecast/train
```

---

## Capteurs IoT

```http
GET /v2/iot/sensors?location=loc_123
```

```json
{
  "sensors": [
    {
      "id": "sensor_001",
      "name": "Capteur température - Réfrigérateur 1",
      "status": "online"
    }
  ]
}
```

---

## Webhooks {#webhooks}

<Accordion title="Événements disponibles">
- forecast.updated  
- sensor.reading  
- sensor.alert  
- production.batch_completed  
- inventory.low_stock  
- quality.alert  
</Accordion>

### Configurer un webhook

```http
POST /v2/webhooks
```

```json
{
  "url": "https://votre-app.com/webhooks/salsa",
  "events": [
    "forecast.updated",
    "sensor.alert"
  ],
  "secret": "votre_secret_webhook",
  "active": true
}
```

---

## Environnement Sandbox

```
https://api-sandbox.salsaasaservice.com/v2
```

<Callout type="info">
L’environnement sandbox utilise des données de test et n’affecte pas votre production.
</Callout>

---

## Support

- api-support@salsaasaservice.com
