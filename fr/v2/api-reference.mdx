---
title: "R√©f√©rence API - v2.0"
description: "Documentation API compl√®te pour v2.0 avec support REST et GraphQL"
---

import VersionBanner from "/snippets/VersionBanner";

# API Salsa as a Service v2.0

<VersionBanner
  version="v2"
  status="current"
  note="Vous consultez la version la plus r√©cente de l‚ÄôAPI v2."
/>

L'API v2.0 ajoute le support GraphQL, un syst√®me de webhooks am√©lior√©, des endpoints de pr√©vision IA et une gestion avanc√©e des capteurs IoT.

---

## URL de base

<CodeGroup>
  <CodeBlock language="text" title="Production">
{`https://api.salsaasaservice.com/v2`}
  </CodeBlock>

  <CodeBlock language="text" title="GraphQL">
{`https://api.salsaasaservice.com/graphql`}
  </CodeBlock>

  <CodeBlock language="text" title="Sandbox">
{`https://api-sandbox.salsaasaservice.com/v2`}
  </CodeBlock>
</CodeGroup>

<Callout type="info">
Nouveau dans v2.0 : endpoint GraphQL disponible avec support des abonnements en temps r√©el.
</Callout>

---

## Authentification

Toutes les requ√™tes API n√©cessitent une authentification avec votre cl√© API.

### En-t√™te d'authentification

<CodeGroup>
  <CodeBlock language="http" title="Header">
{`Authorization: Bearer VOTRE_CLE_API`}
  </CodeBlock>

  <CodeBlock language="bash" title="Exemple cURL">
{`curl -H "Authorization: Bearer VOTRE_CLE_API" \\
https://api.salsaasaservice.com/v2/ai/forecast`}
  </CodeBlock>
</CodeGroup>

<Callout type="warning">
Les cl√©s API v1.0 ne fonctionnent pas avec v2.0. G√©n√©rez une nouvelle cl√© depuis **Param√®tres ‚Üí D√©veloppeur ‚Üí API v2.0**.
</Callout>

---

## Limites de taux

- **Plan Starter** : 10 000 requ√™tes / heure  
- **Plan Professionnel** : 100 000 requ√™tes / heure  
- **Plan Entreprise** : Illimit√©  

<Callout type="info">
Surveillez les en-t√™tes de r√©ponse pour √©viter le d√©passement de limite.
</Callout>

---

# API GraphQL (Nouveau)

## Endpoint GraphQL

<CodeBlock language="text">
{`https://api.salsaasaservice.com/graphql`}
</CodeBlock>

## Exemple de requ√™te

<CodeBlock language="graphql">
{`query GetProductionForecast {
  forecast(location: "loc_123", days: 7) {
    date
    recipes {
      id
      name
      predictedDemand {
        quantity
        unit
        confidence
      }
    }
  }
}`}
</CodeBlock>

## Abonnements en temps r√©el

<CodeBlock language="graphql">
{`subscription OnQualityAlert {
  qualityAlert(location: "loc_123") {
    id
    severity
    sensorId
    message
    timestamp
  }
}`}
</CodeBlock>

## Explorer GraphQL

<CodeBlock language="text">
{`https://api.salsaasaservice.com/graphql/explorer`}
</CodeBlock>

---

# API REST

<CardGroup>
  <Card title="Pr√©visions IA" href="#previsions-ia">
    Acc√©dez aux pr√©visions de demande aliment√©es par IA.
  </Card>

  <Card title="Capteurs IoT" href="#capteurs-iot">
    G√©rez capteurs et lectures.
  </Card>

  <Card title="Production" href="#production">
    Suivez les lots et la qualit√©.
  </Card>

  <Card title="Webhooks" href="#webhooks">
    Notifications en temps r√©el am√©lior√©es.
  </Card>
</CardGroup>

---

## Pr√©visions IA {#previsions-ia}

### Obtenir les pr√©visions de demande

<Tabs>
  <Tab title="Requ√™te">
    <CodeBlock language="http">
{`GET /v2/ai/forecast?location=loc_123&days=7`}
    </CodeBlock>
  </Tab>

  <Tab title="R√©ponse">
    <CodeBlock language="json">
{`{
  "forecast_period": {
    "start_date": "2024-01-20",
    "end_date": "2024-01-27",
    "days": 7
  },
  "predictions": [
    {
      "date": "2024-01-20",
      "recipe_id": "rec_456",
      "recipe_name": "Salsa maison",
      "predicted_demand": {
        "quantity": 12.5,
        "unit": "gallons",
        "confidence_interval": [11.2, 13.8],
        "confidence_level": 0.95
      }
    }
  ]
}`}
    </CodeBlock>
  </Tab>
</Tabs>

### Entra√Æner le mod√®le IA

<CodeBlock language="http">
{`POST /v2/ai/forecast/train`}
</CodeBlock>

---

## Capteurs IoT {#capteurs-iot}

### Obtenir tous les capteurs

<Tabs>
  <Tab title="Requ√™te">
    <CodeBlock language="http">
{`GET /v2/iot/sensors?location=loc_123`}
    </CodeBlock>
  </Tab>

  <Tab title="R√©ponse">
    <CodeBlock language="json">
{`{
  "sensors": [
    {
      "id": "sensor_001",
      "name": "Capteur temp√©rature - R√©frig√©rateur 1",
      "status": "online"
    }
  ]
}`}
    </CodeBlock>
  </Tab>
</Tabs>

### Obtenir les lectures

<CodeBlock language="http">
{`GET /v2/iot/sensors/{sensor_id}/readings?start_date=2024-01-01&end_date=2024-01-31`}
</CodeBlock>

### Configurer les alertes

<CodeBlock language="json">
{`{
  "alert_type": "threshold",
  "conditions": {
    "min_value": 2.0,
    "max_value": 4.0
  },
  "notification_channels": ["email", "sms", "slack"],
  "severity": "high"
}`}
</CodeBlock>

---

## Webhooks v2 (Am√©lior√©) {#webhooks}

### √âv√©nements disponibles

<Accordion title="Liste des √©v√©nements">
- forecast.updated  
- sensor.reading  
- sensor.alert  
- production.batch_completed  
- inventory.low_stock  
- quality.alert  
</Accordion>

### Configurer un webhook

<CodeBlock language="http">
{`POST /v2/webhooks`}
</CodeBlock>

<CodeBlock language="json" title="Payload de configuration">
{`{
  "url": "https://votre-app.com/webhooks/salsa",
  "events": [
    "forecast.updated",
    "sensor.alert"
  ],
  "secret": "votre_secret_webhook",
  "active": true
}`}
</CodeBlock>

---

## SDKs et biblioth√®ques

<CardGroup>
  <Card title="JavaScript SDK v2" href="https://github.com/salsaasaservice/salsa-js-v2">
    Support GraphQL et abonnements.
  </Card>

  <Card title="Python SDK v2" href="https://github.com/salsaasaservice/salsa-python-v2">
    Support IA et IoT.
  </Card>

  <Card title="PHP SDK v2" href="https://github.com/salsaasaservice/salsa-php-v2">
    Int√©gration web.
  </Card>
</CardGroup>

---

## Environnement Sandbox

<CodeBlock language="text">
{`https://api-sandbox.salsaasaservice.com/v2`}
</CodeBlock>

<Callout type="warning">
L‚Äôenvironnement sandbox utilise des donn√©es de test et n‚Äôaffecte pas votre production.
</Callout>

---

## Support

- üìß api-support@salsaasaservice.com  
- üí¨ Discord d√©veloppeur  
- üé• Tutoriels vid√©o  

<Callout type="info">
Les clients v2 b√©n√©ficient d‚Äôun support API prioritaire.
</Callout>
