---
title: "R√©f√©rence API - v2.0"
description: "Documentation API compl√®te pour v2.0 avec support REST et GraphQL"
---

import VersionBanner from "/snippets/VersionBanner";

# API Salsa as a Service v2.0

<VersionBanner version="v2" status="current" />

L'API v2.0 ajoute le support GraphQL, un syst√®me de webhooks am√©lior√©, des endpoints de pr√©vision IA et une gestion avanc√©e des capteurs IoT.

---

## URL de base

<CodeGroup>
```text Production
https://api.salsaasaservice.com/v2
```

```text GraphQL
https://api.salsaasaservice.com/graphql
```

```text Sandbox
https://api-sandbox.salsaasaservice.com/v2
```
</CodeGroup>

<Callout type="info">
Nouveau dans v2.0 : Endpoint GraphQL disponible avec support des abonnements en temps r√©el.
</Callout>

---

## Authentification

Toutes les requ√™tes API n√©cessitent une authentification avec votre cl√© API.

### En-t√™te d'authentification

<CodeGroup>
```http
Authorization: Bearer VOTRE_CLE_API
```

```bash
curl -H "Authorization: Bearer VOTRE_CLE_API" \
https://api.salsaasaservice.com/v2/ai/forecast
```
</CodeGroup>

<Callout type="warning">
Les cl√©s API v1.0 ne fonctionnent pas avec v2.0. G√©n√©rez une nouvelle cl√© depuis **Param√®tres ‚Üí D√©veloppeur ‚Üí API v2.0**.
</Callout>

---

## Limites de taux

- **Plan Starter** : 10 000 requ√™tes / heure  
- **Plan Professionnel** : 100 000 requ√™tes / heure  
- **Plan Entreprise** : Illimit√©  

---

# API GraphQL (Nouveau)

## Endpoint GraphQL

```
https://api.salsaasaservice.com/graphql
```

## Exemple de requ√™te

```graphql
query GetProductionForecast {
  forecast(location: "loc_123", days: 7) {
    date
    recipes {
      id
      name
      predictedDemand {
        quantity
        unit
        confidence
      }
    }
  }
}
```

## Abonnements en temps r√©el

```graphql
subscription OnQualityAlert {
  qualityAlert(location: "loc_123") {
    id
    severity
    sensorId
    message
    timestamp
  }
}
```

## Explorer GraphQL

```
https://api.salsaasaservice.com/graphql/explorer
```

---

# API REST

<CardGroup>
  <Card title="Pr√©visions IA" href="#previsions-ia">
    Acc√©dez aux pr√©visions de demande aliment√©es par IA.
  </Card>

  <Card title="Capteurs IoT" href="#capteurs-iot">
    G√©rez capteurs et lectures.
  </Card>

  <Card title="Production" href="#production">
    Suivez les lots et la qualit√©.
  </Card>

  <Card title="Webhooks" href="#webhooks">
    Notifications en temps r√©el am√©lior√©es.
  </Card>
</CardGroup>

---

## Pr√©visions IA {#previsions-ia}

### Obtenir les pr√©visions de demande

<Tabs>
  <Tab title="Requ√™te">
```http
GET /v2/ai/forecast?location=loc_123&days=7
```
  </Tab>

  <Tab title="R√©ponse">
```json
{
  "forecast_period": {
    "start_date": "2024-01-20",
    "end_date": "2024-01-27",
    "days": 7
  },
  "predictions": [
    {
      "date": "2024-01-20",
      "recipe_id": "rec_456",
      "recipe_name": "Salsa maison",
      "predicted_demand": {
        "quantity": 12.5,
        "unit": "gallons",
        "confidence_interval": [11.2, 13.8],
        "confidence_level": 0.95
      }
    }
  ],
  "model_accuracy": {
    "mape": 5.2,
    "last_updated": "2024-01-19T08:00:00Z"
  }
}
```
  </Tab>
</Tabs>

### Entra√Æner le mod√®le IA

```http
POST /v2/ai/forecast/train
```

---

## Capteurs IoT {#capteurs-iot}

### Obtenir tous les capteurs

<Tabs>
  <Tab title="Requ√™te">
```http
GET /v2/iot/sensors?location=loc_123
```
  </Tab>

  <Tab title="R√©ponse">
```json
{
  "sensors": [
    {
      "id": "sensor_001",
      "name": "Capteur de temp√©rature - R√©frig√©rateur 1",
      "type": "temperature",
      "status": "online",
      "last_reading": {
        "value": 3.5,
        "unit": "celsius",
        "timestamp": "2024-01-20T10:30:00Z"
      },
      "battery_level": 85
    }
  ]
}
```
  </Tab>
</Tabs>

### Obtenir les lectures

```http
GET /v2/iot/sensors/{sensor_id}/readings?start_date=2024-01-01&end_date=2024-01-31
```

### Configurer les alertes

```http
POST /v2/iot/sensors/{sensor_id}/alerts
```

```json
{
  "alert_type": "threshold",
  "conditions": {
    "min_value": 2.0,
    "max_value": 4.0,
    "unit": "celsius"
  },
  "notification_channels": ["email", "sms", "slack"],
  "severity": "high"
}
```

---

## Webhooks v2 (Am√©lior√©) {#webhooks}

### √âv√©nements disponibles

<Accordion title="Liste des √©v√©nements">
- forecast.updated  
- sensor.reading  
- sensor.alert  
- production.batch_completed  
- inventory.low_stock  
- quality.alert  
</Accordion>

### Configurer un webhook

```http
POST /v2/webhooks
```

```json
{
  "url": "https://votre-app.com/webhooks/salsa",
  "events": [
    "forecast.updated",
    "sensor.alert",
    "production.batch_completed"
  ],
  "secret": "votre_secret_webhook",
  "active": true
}
```

### Exemple de payload

```json
{
  "event": "sensor.alert",
  "timestamp": "2024-01-20T10:30:00Z",
  "data": {
    "alert_id": "alert_789",
    "sensor_id": "sensor_001",
    "severity": "high",
    "message": "Temp√©rature hors limites"
  },
  "signature": "sha256=abc123..."
}
```

---

## SDKs et biblioth√®ques

<CardGroup>
  <Card title="JavaScript SDK v2" href="https://github.com/salsaasaservice/salsa-js-v2">
    Support GraphQL et abonnements.
  </Card>

  <Card title="Python SDK v2" href="https://github.com/salsaasaservice/salsa-python-v2">
    Support IA et IoT.
  </Card>

  <Card title="PHP SDK v2" href="https://github.com/salsaasaservice/salsa-php-v2">
    Int√©gration web.
  </Card>
</CardGroup>

---

## Environnement Sandbox

```
https://api-sandbox.salsaasaservice.com/v2
```

<Callout type="warning">
L‚Äôenvironnement sandbox utilise des donn√©es de test et n‚Äôaffecte pas votre production.
</Callout>

---

## Support

- üìß api-support@salsaasaservice.com  
- üí¨ Discord d√©veloppeur  
- üé• Tutoriels vid√©o  

<Callout type="info">
Les clients v2.0 b√©n√©ficient d‚Äôun support API prioritaire.
</Callout>
