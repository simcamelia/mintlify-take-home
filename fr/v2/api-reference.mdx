---
title: "R√©f√©rence API - v2.0"
description: "Documentation API compl√®te pour v2.0 avec support REST et GraphQL"
---

# API Salsa as a Service v2.0

L'API v2.0 ajoute le support GraphQL, un syst√®me de webhooks am√©lior√©, des endpoints de pr√©vision IA et une gestion avanc√©e des capteurs IoT.

<Callout type="info">
**Nouveau dans v2.0 :** endpoint GraphQL disponible √† `https://api.salsaasaservice.com/graphql`.
</Callout>

---

## URL de base

**REST (Production)**

```text
https://api.salsaasaservice.com/v2
```

**GraphQL**

```text
https://api.salsaasaservice.com/graphql
```

**Sandbox (REST)**

```text
https://api-sandbox.salsaasaservice.com/v2
```

---

## Navigation rapide

<CardGroup>
  <Card title="Authentification" href="#authentification">
    Cl√©s API, en-t√™tes et exemples.
  </Card>
  <Card title="Limites de taux" href="#limites-de-taux">
    Quotas + en-t√™tes de r√©ponse.
  </Card>
  <Card title="Pr√©visions IA" href="#previsions-ia">
    Endpoint de pr√©vision et entra√Ænement.
  </Card>
  <Card title="Webhooks" href="#webhooks">
    √âv√©nements et configuration.
  </Card>
</CardGroup>

---

## Authentification {#authentification}

Toutes les requ√™tes API n√©cessitent une authentification avec votre cl√© API.

<Callout type="info">
**Cl√© API :** r√©cup√©rez votre cl√© via les <a href="https://app.salsaasaservice.com/settings/api">Developer Settings</a> dans le dashboard.
</Callout>

### En-t√™te d'authentification

```http
Authorization: Bearer VOTRE_CLE_API
```

**Exemple cURL**

```bash
curl -H "Authorization: Bearer VOTRE_CLE_API" \
  https://api.salsaasaservice.com/v2/ai/forecast?location=loc_123&days=7
```

<Callout type="warning">
Les cl√©s API v1 ne sont pas compatibles avec v2. G√©n√©rez une nouvelle cl√© v2 depuis votre dashboard.
</Callout>

---

## Limites de taux {#limites-de-taux}

- **Plan Starter** : 10 000 requ√™tes / heure  
- **Plan Professionnel** : 100 000 requ√™tes / heure  
- **Plan Entreprise** : Illimit√©  

<Callout type="info">
Surveillez les en-t√™tes de r√©ponse pour √©viter le d√©passement de limite.
</Callout>

---

## API GraphQL (Nouveau)

**Endpoint**
```text
https://api.salsaasaservice.com/graphql
```

**Exemple de requ√™te**
```graphql
query GetProductionForecast {
  forecast(location: "loc_123", days: 7) {
    date
    recipes {
      id
      name
      predictedDemand {
        quantity
        unit
        confidence
      }
    }
  }
}
```

**Abonnements (temps r√©el)**
```graphql
subscription OnQualityAlert {
  qualityAlert(location: "loc_123") {
    id
    severity
    sensorId
    message
    timestamp
  }
}
```

**Explorer**
```text
https://api.salsaasaservice.com/graphql/explorer
```

---

## API REST

### Pr√©visions IA {#previsions-ia}

**Obtenir les pr√©visions**
```http
GET /ai/forecast?location=loc_123&days=7
```

**Exemple de r√©ponse**
```json
{
  "forecast_period": {
    "start_date": "2024-01-20",
    "end_date": "2024-01-27",
    "days": 7
  },
  "predictions": [
    {
      "date": "2024-01-20",
      "recipe_id": "rec_456",
      "recipe_name": "Salsa maison",
      "predicted_demand": {
        "quantity": 12.5,
        "unit": "gallons",
        "confidence_interval": [11.2, 13.8],
        "confidence_level": 0.95
      }
    }
  ]
}
```

**Entra√Æner le mod√®le**
```http
POST /ai/forecast/train
```

---

### Capteurs IoT {#capteurs-iot}

**Lister les capteurs**
```http
GET /iot/sensors?location=loc_123
```

**Exemple de r√©ponse**
```json
{
  "sensors": [
    {
      "id": "sensor_001",
      "name": "Capteur temp√©rature - R√©frig√©rateur 1",
      "status": "online"
    }
  ]
}
```

**Lire les mesures**
```http
GET /iot/sensors/{sensor_id}/readings?start_date=2024-01-01&end_date=2024-01-31
```

**Configurer une alerte**
```http
POST /iot/sensors/{sensor_id}/alerts
```

```json
{
  "alert_type": "threshold",
  "conditions": {
    "min_value": 2.0,
    "max_value": 4.0,
    "unit": "celsius"
  },
  "notification_channels": ["email", "sms", "slack"],
  "severity": "high"
}
```

---

## Webhooks v2 (Am√©lior√©) {#webhooks}

<Accordion title="√âv√©nements disponibles">
- `forecast.updated`  
- `sensor.reading`  
- `sensor.alert`  
- `production.batch_completed`  
- `inventory.low_stock`  
- `quality.alert`  
</Accordion>

**Cr√©er un webhook**
```http
POST /webhooks
```

```json
{
  "url": "https://votre-app.com/webhooks/salsa",
  "events": ["forecast.updated", "sensor.alert"],
  "secret": "votre_secret_webhook",
  "active": true
}
```

---

## SDKs et biblioth√®ques

- [JavaScript SDK v2](https://github.com/salsaasaservice/salsa-js-v2)  
- [Python SDK v2](https://github.com/salsaasaservice/salsa-python-v2)  
- [PHP SDK v2](https://github.com/salsaasaservice/salsa-php-v2)  

---

## Environnement Sandbox

```text
https://api-sandbox.salsaasaservice.com/v2
```

<Callout type="warning">
L‚Äôenvironnement sandbox utilise des donn√©es de test et n‚Äôaffecte pas votre production.
</Callout>

---

## Support

- üìß api-support@salsaasaservice.com  
- üí¨ Discord d√©veloppeur  
- üé• Tutoriels vid√©o  

<Callout type="info">
Les clients v2 b√©n√©ficient d‚Äôun support API prioritaire.
</Callout>
